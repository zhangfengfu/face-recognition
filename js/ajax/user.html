<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>ajax表单验证</title>
<meta name="keywords" content="">
<meta name="description" content="">
</head>
<body>
	用户名：<input type="text" name="user"/><br/>
	密&nbsp;码：<input type="password" name="pass"/><br/>
	<input type="button" value="登陆" id="login"/>
	<input type="button" value="注册" id="add"/>
</body>
<script type="text/javascript" src="ajax.js"></script>
<script>
window.onload=function (){
	var oUser=document.getElementsByName("user")[0];
	var oPass=document.getElementsByName("pass")[0];
	var oLogin=document.getElementById("login");
	var oAdd=document.getElementById("add");

	oLogin.onclick=function (){
		ajax("user.php?act=login&user="+oUser.value+"&pass="+oPass.value+"&t="+Math.random(),function (str){
			
			var json=eval("("+str+")");//转换成josn对象
			if (json.err){
				alert(json.msg);
			}else{
				alert(json.msg);
			}
		});
	};
	
	oAdd.onclick=function (){
		ajax("user.php?act=add&user="+oUser.value+"&pass="+oPass.value+"&t="+Math.random(),function (str){
			
			var json=eval("("+str+")");
			if (json.err){
				alert(json.msg);
			}else{
				alert(json.msg);
			}
		});
	};
}
</script>
</html>
